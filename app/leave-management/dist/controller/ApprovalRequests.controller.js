sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/core/routing/History","sap/ui/core/UIComponent","sap/m/MessageBox","sap/ui/model/json/JSONModel"],function(e,t,r,s,a){"use strict";return e.extend("leave.management.controller.ApprovalRequests",{onInit:function(){this._oRouter=r.getRouterFor(this);this._oRouter.attachRouteMatched(this.onRouteMatched,this)},formatDate:function(e){if(!e)return"";var t=new Date(e);if(isNaN(t))return"";var r=t.getDate().toString().padStart(2,"0");var s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var a=s[t.getMonth()];var o=t.getFullYear();return`${r}-${a}-${o}`},onRouteMatched:function(e){var t=e.getParameter("name");if(t==="approvalLeaveRequests"){this._loadLeaveRequests()}},_loadLeaveRequests:function(){var e=this.byId("approvalLeaveRequestsTable");var t=e.getBinding("items");if(t){t.refresh()}},formatStatusState:function(e){switch(e){case"Approved":return"Success";case"Rejected":return"Error";case"Pending":return"Warning";default:return"None"}},onApproveRequest:async function(e){try{const t=e.getSource().getBindingContext();const r=t.getObject();const a=this.getView().getModel();const o=a.bindContext(`/LeaveRequests(ID=${r.ID})/LeaveService.approveRequest(...)`);await o.execute();s.success("Leave request approved successfully");a.refresh()}catch(e){s.error("Error approving leave request: "+e.message)}},onRejectRequest:async function(e){try{var t=e.getSource().getBindingContext();var r=t.getObject();const a=this.getView().getModel();const o=a.bindContext(`/LeaveRequests(ID=${r.ID})/LeaveService.rejectRequest(...)`);await o.execute();s.success("Leave request rejected successfully");a.refresh()}catch(e){s.error("Error rejecting leave request: "+e.message)}},_callAction:function(e,t,r){var a=this.getView().getModel();var o="/LeaveRequests("+e+")/"+t;a.callFunction(o,{method:"POST",success:function(){s.success(r);this._loadLeaveRequests()}.bind(this),error:function(e){s.error("Error: "+e.message)}})},onNavBack:function(){var e=r.getRouterFor(this);if(e){e.navTo("home",{},true)}else{window.location.href="/"}}})});
//# sourceMappingURL=ApprovalRequests.controller.js.map